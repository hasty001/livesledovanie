{% extends "layout.html" %}
{% block body %}

<style>
#map { height: 80vh;}
</style>

<link rel="stylesheet" href="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.css" />
<script src="https://npmcdn.com/leaflet@1.0.0-rc.2/dist/leaflet.js"></script>



<div id="map"></div>

<script type=text/javascript>



var map = L.map('map').setView([49.35, 21.06], 9);
var markerLayerGroup = L.layerGroup().addTo(map);

L.tileLayer('http://tiles.freemap.sk/T/{z}/{x}/{y}', { maxZoom: 18, attribution: 'Map data &copy; <a href="http://freemap.sk">Freemap.sk</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a> Written by <a href="http://cestasnp.sk">hasty</a>.' }).addTo(map);

do_points();

function do_points(){
        requestURL = "/ajax/pois";
        $.getJSON(requestURL, function(json) {
            for (var i in json) {
                console.log(i)
                console.log(json[i])
                L.marker([json[i].lat, json[i].lon]).addTo(map).bindPopup("<b>Hello world!</b><br>" + json[i].name);
            }
        });
      }


</script>

{% endblock %}
